# ğŸ” **ç”¨æˆ·è®¤è¯ç³»ç»Ÿå¼€å‘æ­¥éª¤æŒ‡å—**

> **é—®é¢˜å·²è§£å†³**: SQLite ENUMè¯­æ³•é”™è¯¯å·²ä¿®å¤ âœ…  
> **çŠ¶æ€**: æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ âœ…  
> **ä¸‹ä¸€æ­¥**: å¯åŠ¨æœåŠ¡å™¨å¹¶æµ‹è¯•API  

---

## ğŸ‰ **é—®é¢˜è§£å†³ç¡®è®¤**

åˆšæ‰é‡åˆ°çš„æ•°æ®åº“é”™è¯¯ï¼š
```
SQLITE_ERROR: near "'active'": syntax error
```

**åŸå› **: SQLiteä¸æ”¯æŒENUMç±»å‹  
**è§£å†³**: å·²å°† `ENUM('active', 'inactive')` æ”¹ä¸º `TEXT CHECK (status IN ('active', 'inactive'))`  
**éªŒè¯**: âœ… æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ  

---

## ğŸš€ **ç«‹å³å¼€å§‹æµ‹è¯•**

### **æ­¥éª¤1: å¯åŠ¨åç«¯æœåŠ¡å™¨**

#### æ–¹æ³•A: ä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨èï¼‰
```cmd
# åŒå‡»è¿è¡Œ
backend/start-server.bat

# æˆ–åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ
cd backend
start-server.bat
```

#### æ–¹æ³•B: æ‰‹åŠ¨å¯åŠ¨
```cmd
cd backend
node server.js
```

**æœŸæœ›è¾“å‡º**:
```
ğŸš€ è®¤è¯æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
ğŸ“ æœåŠ¡åœ°å€: http://localhost:3000
ğŸ”— APIæ–‡æ¡£: http://localhost:3000/api/auth
ğŸ’“ å¥åº·æ£€æŸ¥: http://localhost:3000/health
```

### **æ­¥éª¤2: æµ‹è¯•APIæ¥å£**

#### æµè§ˆå™¨æµ‹è¯•
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000/health
2. åº”è¯¥çœ‹åˆ°: `{"success":true,"message":"æœåŠ¡å™¨è¿è¡Œæ­£å¸¸"}`

#### ä½¿ç”¨æµ‹è¯•é¡µé¢
1. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€: `auth-integration-example.html`
2. æµ‹è¯•æ³¨å†Œæ–°ç”¨æˆ·
3. æµ‹è¯•ç™»å½•åŠŸèƒ½

---

## ğŸ“‹ **å®Œæ•´æµ‹è¯•æ¸…å•**

### **åç«¯APIæµ‹è¯•**
- [ ] âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
- [ ] âœ… æœåŠ¡å™¨å¯åŠ¨æ— é”™è¯¯
- [ ] å¥åº·æ£€æŸ¥æ¥å£: `GET http://localhost:3000/health`
- [ ] ç”¨æˆ·æ³¨å†Œæ¥å£: `POST http://localhost:3000/api/auth/register`
- [ ] ç”¨æˆ·ç™»å½•æ¥å£: `POST http://localhost:3000/api/auth/login`
- [ ] TokenéªŒè¯æ¥å£: `GET http://localhost:3000/api/auth/verify`

### **å‰ç«¯åŠŸèƒ½æµ‹è¯•**
- [ ] æ‰“å¼€æµ‹è¯•é¡µé¢æ— JSé”™è¯¯
- [ ] æ³¨å†Œæ–°ç”¨æˆ·æˆåŠŸ
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºæ­£ç¡®
- [ ] é€€å‡ºç™»å½•åŠŸèƒ½æ­£å¸¸

---

## ğŸ§ª **APIæµ‹è¯•ç¤ºä¾‹**

### **ä½¿ç”¨Postmanæˆ–å…¶ä»–APIå·¥å…·**

#### 1. æ³¨å†Œç”¨æˆ·
```http
POST http://localhost:3000/api/auth/register
Content-Type: application/json

{
  "username": "testuser",
  "email": "test@example.com", 
  "password": "test123"
}
```

**æœŸæœ›å“åº”**:
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "username": "testuser",
      "email": "test@example.com"
    }
  }
}
```

#### 2. ç”¨æˆ·ç™»å½•
```http
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "username": "testuser",
  "password": "test123"
}
```

#### 3. éªŒè¯Token
```http
GET http://localhost:3000/api/auth/verify
Authorization: Bearer YOUR_TOKEN_HERE
```

---

## ğŸ”§ **å¸¸è§é—®é¢˜è§£å†³**

### **é—®é¢˜1: ç«¯å£è¢«å ç”¨**
```
Error: listen EADDRINUSE :::3000
```
**è§£å†³**: æ›´æ¢ç«¯å£
```cmd
set PORT=3001
node server.js
```

### **é—®é¢˜2: æ•°æ®åº“æ–‡ä»¶æƒé™**
**è§£å†³**: ç¡®ä¿backendç›®å½•æœ‰å†™å…¥æƒé™

### **é—®é¢˜3: Node.jsæ¨¡å—æœªæ‰¾åˆ°**
**è§£å†³**: é‡æ–°å®‰è£…ä¾èµ–
```cmd
npm install
```

### **é—®é¢˜4: CORSé”™è¯¯**
**è§£å†³**: ç¡®è®¤corsä¸­é—´ä»¶å·²æ­£ç¡®é…ç½®ï¼ˆå·²åœ¨server.jsä¸­é…ç½®ï¼‰

---

## ğŸ“± **å‰ç«¯é›†æˆæŒ‡å—**

### **æ›¿æ¢ç°æœ‰è®¤è¯ç³»ç»Ÿ**

#### 1. å¤‡ä»½ç°æœ‰æ–‡ä»¶
```cmd
copy js\core\auth.js js\core\auth-backup.js
```

#### 2. ä½¿ç”¨æ–°çš„è®¤è¯ç®¡ç†å™¨
```cmd
copy js\core\auth-new.js js\core\auth.js
```

#### 3. æ›´æ–°é¡µé¢å¼•ç”¨
ç¡®ä¿æ‰€æœ‰é¡µé¢éƒ½æ­£ç¡®å¼•å…¥æ–°çš„è®¤è¯æ–‡ä»¶

#### 4. æ·»åŠ æƒé™æ£€æŸ¥
åœ¨éœ€è¦ç™»å½•çš„é¡µé¢ä¸­æ·»åŠ ï¼š
```javascript
document.addEventListener('DOMContentLoaded', function() {
    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    if (!AuthManager.isAuthenticated()) {
        window.location.href = 'index.html';
    }
});
```

---

## ğŸ”„ **å¼€å‘å·¥ä½œæµ**

### **Day 1: åç«¯å¼€å‘**
1. âœ… æ•°æ®åº“è®¾è®¡å’Œåˆå§‹åŒ–
2. âœ… JWTå·¥å…·ç±»å’Œå¯†ç åŠ å¯†
3. âœ… ç”¨æˆ·æ³¨å†Œå’Œç™»å½•API
4. âœ… è®¤è¯ä¸­é—´ä»¶

### **Day 2: å‰ç«¯å¼€å‘**
1. âœ… AuthManagerç±»é‡æ„
2. å‰ç«¯UIç»„ä»¶æ›´æ–°
3. é¡µé¢æƒé™æ§åˆ¶
4. å®Œæ•´æµç¨‹æµ‹è¯•

### **Day 3: é›†æˆæµ‹è¯•**
1. å‰åç«¯è”è°ƒ
2. é”™è¯¯å¤„ç†ä¼˜åŒ–
3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
4. éƒ¨ç½²å‡†å¤‡

---

## ğŸ“ˆ **æ€§èƒ½å’Œå®‰å…¨æ£€æŸ¥**

### **å®‰å…¨æ£€æŸ¥**
- [ ] å¯†ç å·²åŠ å¯†å­˜å‚¨ï¼ˆBCryptï¼‰
- [ ] JWT Tokenæœ‰è¿‡æœŸæ—¶é—´
- [ ] APIå‚æ•°éªŒè¯å®Œæ•´
- [ ] SQLæ³¨å…¥é˜²æŠ¤ç”Ÿæ•ˆ

### **åŠŸèƒ½æ£€æŸ¥**
- [ ] æ³¨å†Œç™»å½•æµç¨‹å®Œæ•´
- [ ] Tokenè‡ªåŠ¨éªŒè¯å·¥ä½œæ­£å¸¸
- [ ] é¡µé¢æƒé™æ§åˆ¶ç”Ÿæ•ˆ
- [ ] é€€å‡ºç™»å½•æ¸…ç†å®Œæ•´

---

## ğŸ¯ **ä¸‹ä¸€æ­¥è®¡åˆ’**

å½“åŸºç¡€åŠŸèƒ½ç¨³å®šåï¼Œå¯ä»¥æ·»åŠ ï¼š
- Tokenè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- ç¬¬ä¸‰æ–¹ç™»å½•æ”¯æŒï¼ˆå¾®ä¿¡ã€GitHubï¼‰
- ç”¨æˆ·èµ„æ–™ç®¡ç†é¡µé¢
- ç™»å½•å¼‚å¸¸æ£€æµ‹
- æ›´è¯¦ç»†çš„æƒé™æ§åˆ¶

---

**ğŸ“ ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹æµ‹è¯•äº†ï¼**

1. è¿è¡Œ `backend/start-server.bat` å¯åŠ¨æœåŠ¡å™¨
2. æ‰“å¼€ `auth-integration-example.html` æµ‹è¯•å‰ç«¯åŠŸèƒ½
3. å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œç»§ç»­é›†æˆåˆ°ç°æœ‰é¡¹ç›®ä¸­ 